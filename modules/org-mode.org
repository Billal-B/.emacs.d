* Packages
#+begin_src emacs-lisp
(use-package org-bullets)
(use-package grip-mode)
(use-package ox-gfm
  :config
  (eval-after-load "org"
  '(require 'ox-gfm nil t)))
#+end_src

* Configuration
** General
#+begin_src emacs-lisp
(setq org-directory (expand-file-name "org-files" user-emacs-directory))
(setq org-log-done 'time)

(add-to-list 'auto-mode-alist '("\\.org\\’" . org-mode))
(add-to-list 'auto-mode-alist '("\\.txt\\'" . org-mode))
(add-to-list 'auto-mode-alist '("\\.rst\\'" . org-mode))
(add-to-list 'auto-mode-alist '("\\.md\\'" . org-mode))

(setq org-edit-src-content-indentation 0)
(setq org-confirm-babel-evaluate nil)
#+end_src

#+RESULTS:

** Org bullets
#+begin_src emacs-lisp
(require 'org-bullets)
(setq org-bullets-bullet-list
      '("◉" "○"))
(add-hook 'org-mode-hook (lambda () (org-bullets-mode 1)))
#+end_src
** TODO Agenda
#+begin_src emacs-lisp
(setq org-agenda-files (directory-files-recursively "~/org-files/" "\.org$"))
(setq org-capture-dir (expand-file-name "org-files" user-emacs-directory))

;; TODO don't use hard written folder for captures
(setq org-capture-templates
      '(("t" "Todo (ADYL)" entry (file+headline "~/.emacs.d/org-files/agenda-adyl.org" "TODOS")
	 "* TODO %?\n  %U\n")
	("a" "Agenda (ADYL)" entry (file+datetree "~/.emacs.d/org-files/agenda-adyl.org" "Agenda")
	 "* %?\nEntered on %U\n")
	("n" "Note" entry (file+datetree "~/.emacs.d/org-files/notes.org" "Notes")
	 "* %?\nEntered on %U\n")))
(setq org-agenda-skip-scheduled-if-done t
      org-agenda-skip-deadline-if-done t
      org-agenda-include-deadlines t
      org-agenda-block-separator nil
      org-agenda-compact-blocks t
      org-agenda-start-day nil ;; i.e. today
      org-agenda-span 1
      org-agenda-start-on-weekday nil)
(setq org-agenda-custom-commands
      '(("c" "Super view"
	 ((agenda "" ((org-agenda-overriding-header "")
		      (org-super-agenda-groups
		       '((:name "Today"
				:time-grid t
				:date today
				:order 1)))))
	  (alltodo "" ((org-agenda-overriding-header "")
		       (org-super-agenda-groups
			'((:log t)
			  (:name "To refile"
				 :file-path "refile\\.org")
			  (:name "Next to do"
				 :todo "NEXT"
				 :order 1)
			  (:name "Important"
				 :priority "A"
				 :order 6)
			  (:name "Today's tasks"
				 :file-path "journal/")
			  (:name "Due Today"
				 :deadline today
				 :order 2)
			  (:name "Scheduled Soon"
				 :scheduled future
				 :order 8)
			  (:name "Overdue"
				 :deadline past
				 :order 7)
			  (:name "Meetings"
				 :and (:todo "MEET" :scheduled future)
				 :order 10)
			  (:discard (:not (:todo "TODO")))))))))))
#+end_src

** Lisp 
#+begin_src emacs-lisp
(defun bb-org-evaluate-and-next ()
  (interactive)
  (call-interactively 'org-ctrl-c-ctrl-c)
  (org-babel-next-src-block))

(defun bb-org-rifle ()
  (interactive)
  (helm-org-rifle-directories (expand-file-name "modules" user-emacs-directory)))
#+end_src
*** TODO improves bb-org rifle
#+RESULTS:
: bb-org-evaluate-and-next

* Bindings
#+begin_src emacs-lisp
(mode-leader org-mode-map
  "f" 'org-gfm-convert-region-to-md
  "F" 'grip-mode
  "g" 'counsel-org-goto
  "G" 'counsel-org-goto-all
  "!" 'bb-org-evaluate-and-next
  )
#+end_src

#+RESULTS:
